databaseChangeLog:
  - changeSet:
      id: create-taxon-table
      author: YEK
      changes:
        - createTable:
            tableName: taxon
            columns:
              - column:
                  name: id
                  type: uuid
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: kingdom
                  type: varchar(150)
              - column:
                  name: phylum
                  type: varchar(150)
              - column:
                  name: taxon_class
                  type: varchar(150)
              - column:
                  name: taxon_order
                  type: varchar(150)
              - column:
                  name: sub_order
                  type: varchar(255)
              - column:
                  name: family
                  type: varchar(150)
              - column:
                  name: genus
                  type: varchar(150)
              - column:
                  name: sub_genus
                  type: varchar(150)
              - column:
                  name: specific_epithet
                  type: varchar(45)
              - column:
                  name: infraspecific_epithet
                  type: varchar(45)
              - column:
                  name: scientific_name
                  type: varchar(255)
              - column:
                  name: scientific_name_authorship
                  type: varchar(255)
              - column:
                  name: taxon_remarks
                  type: clob
              - column:
                  name: vernacular_name
                  type: varchar(255)
              - column:
                  name: referential_name
                  type: varchar(255)
              - column:
                  name: referential_version
                  type: varchar(255)
              - column:
                  name: level_type
                  type: clob
              - column:
                  name: fk_id_identification
                  type: uuid
                  constraints:
                    nullable: false
              - column:
                  name: data_change_ts
                  type: timestamp

        - addForeignKeyConstraint:
            baseColumnNames: fk_id_identification
            baseTableName: taxon
            constraintName: fk_id_identification
            onDelete: CASCADE
            onUpdate: CASCADE
            referencedColumnNames: id
            referencedTableName: identification
            validate: true
